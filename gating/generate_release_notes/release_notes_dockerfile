FROM ubuntu:16.04
RUN apt-get update && apt-get install -y python-pip build-essential python-dev libssl-dev
RUN apt-get install -y libffi-dev
RUN apt-get install -y sudo
RUN apt-get install -y git-core
RUN useradd jenkins --shell /bin/bash --create-home --uid 500
RUN echo "jenkins ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers

RUN apt-get install -y pandoc

# use released versions of the differs when they are available.
RUN pip install rpc_differ==0.3.0 reno==2.5.0
RUN pip install git+https://github.com/major/osa_differ@0.3.1

RUN rpc-differ --debug --update master master
COPY gating/generate_release_notes/generate_release_notes.sh /generate_release_notes.sh
CMD /generate_release_notes.sh
